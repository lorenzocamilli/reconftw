#!/bin/bash

# Default config path
CONFIG_PATH="${RECONFTW_CFG}"

# Check if the config file exists
if [[ -f "${CONFIG_PATH}" ]]; then
    source "${CONFIG_PATH}"
else
    echo "Error: reconftw.cfg not found at ${CONFIG_PATH}!"
    exit 1
fi

# Description: Script to validate a domain, website, or URL

# Regex for domain, website, or URL validation
DOMAIN_VALIDATION_REGEX="^(https?:\/\/)?([a-zA-Z0-9]([a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:\d+)?(\/[^\s]*)?$"

# Function to validate the domain
validate_domain() {
	local DOMAIN="$1"
	if [[ ${DOMAIN} =~ ${DOMAIN_VALIDATION_REGEX} ]]; then
		exit 0
	else
		echo "Invalid domain/website/url."
		exit 1
	fi
}

# Check if a domain is provided
if [[ $# -ne 1 ]]; then
	echo "$(basename "$0") <domain/website/URL>"
	exit 1
fi

# Call the validation function
validate_domain "$1"
